cscope 15 $HOME/Desktop/hao_dance/hw3 -q 0000000363 0000036699
	@src/cmd/cmdCharDef.cpp

8 
	~<io¡»am
>

9 
	~<iomª
>

10 
	~<‹rmios.h
>

11 
	~<¡dlib.h
>

12 
	~<ùy³.h
>

13 
	~<ÿs£¹
>

14 
	~"cmdP¬£r.h
"

16 
usšg
 
Çme¥aû
 
	g¡d
;

21 
‹rmios
 
	g¡Üed_£‰šgs
;

23 
	$»£t_key´ess
()

25 
	`tc£‰r
(0,
TCSANOW
,&
¡Üed_£‰šgs
);

26 
	}
}

28 
	$£t_key´ess
()

30 
‹rmios
 
Ãw_£‰šgs
;

31 
	`tcg‘©Œ
(0,&
¡Üed_£‰šgs
);

32 
Ãw_£‰šgs
 = 
¡Üed_£‰šgs
;

33 
Ãw_£‰šgs
.
c_læag
 &ğ(~
ICANON
);

34 
Ãw_£‰šgs
.
c_læag
 &ğ(~
ECHO
);

35 
Ãw_£‰šgs
.
c_cc
[
VTIME
] = 0;

36 
	`tcg‘©Œ
(0,&
¡Üed_£‰šgs
);

37 
Ãw_£‰šgs
.
c_cc
[
VMIN
] = 1;

38 
	`tc£‰r
(0,
TCSANOW
,&
Ãw_£‰šgs
);

39 
	}
}

44 
	$myg‘c
(
i¡»am
& 
i¡r
)

46 
ch
;

47 
	`£t_key´ess
();

48 
i¡r
.
	`un£tf
(
ios_ba£
::
skws
);

49 
i¡r
 >> 
ch
;

50 
i¡r
.
	`£tf
(
ios_ba£
::
skws
);

51 
	`»£t_key´ess
();

52 #ifdeà
TEST_ASC


53 
cout
 << 
Ëá
 << 
	`£tw
(6è<< (
ch
);

55  
ch
;

56 
	}
}

58 
	$myb“p
()

60 
cout
 << (
BEEP_CHAR
);

61 
	}
}

63 
šlše
 
P¬£Ch¬
 
»tuºCh
();

65 #iâdeà
TA_KB_SETTING


72 
P¬£Ch¬


73 
	gCmdP¬£r
::
	$g‘Ch¬
(
i¡»am
& 
i¡r
) const

75 
ch
 = 
	`myg‘c
(
i¡r
);

77 ià(
i¡r
.
	`eof
())

78  
	`»tuºCh
(
INPUT_END_KEY
);

79 
ch
) {

82 
LINE_BEGIN_KEY
:

83 
LINE_END_KEY
:

84 
INPUT_END_KEY
:

85 
TAB_KEY
:

86 
NEWLINE_KEY
:

87  
	`»tuºCh
(
ch
);

103 
BACK_SPACE_KEY
:

104  
	`»tuºCh
(
ch
);

108 
ESC_KEY
: {

109 
combo
 = 
	`myg‘c
(
i¡r
);

111 ià(
combo
 =ğ(
MOD_KEY_INT
)) {

112 
key
 = 
	`myg‘c
(
i¡r
);

113 ià((
key
 >ğ(
MOD_KEY_BEGIN
)è&& (key <ğ(
MOD_KEY_END
))) {

114 ià(
	`myg‘c
(
i¡r
è=ğ
MOD_KEY_DUMMY
)

115  
	`»tuºCh
((
key
è+ 
MOD_KEY_FLAG
);

116  
	`»tuºCh
(
UNDEFINED_KEY
);

118 ià((
key
 >ğ(
ARROW_KEY_BEGIN
)) &&

119 (
key
 <ğ(
ARROW_KEY_END
)))

120  
	`»tuºCh
((
key
è+ 
ARROW_KEY_FLAG
);

121  
	`»tuºCh
(
UNDEFINED_KEY
);

123 { 
	`myb“p
();  
	`g‘Ch¬
(
i¡r
); }

128 ià(
	`i¥ršt
(
ch
)è 
	`»tuºCh
(ch);

129  
	`»tuºCh
(
UNDEFINED_KEY
);

132  
	`»tuºCh
(
UNDEFINED_KEY
);

133 
	}
}

142 
P¬£Ch¬


143 
	gCmdP¬£r
::
	$g‘Ch¬
(
i¡»am
& 
i¡r
) const

145 
ch
 = 
	`myg‘c
(
i¡r
);

147 ià(
i¡r
.
	`eof
())

148  
	`»tuºCh
(
INPUT_END_KEY
);

149 
ch
) {

152 
LINE_BEGIN_KEY
:

153 
LINE_END_KEY
:

154 
INPUT_END_KEY
:

155 
TAB_KEY
:

156 
NEWLINE_KEY
:

157  
	`»tuºCh
(
ch
);

163 
BACK_SPACE_KEY
:

164  
	`»tuºCh
(
ch
);

168 
ESC_KEY
: {

169 
combo
 = 
	`myg‘c
(
i¡r
);

171 ià(
combo
 =ğ(
MOD_KEY_INT
)) {

172 
key
 = 
	`myg‘c
(
i¡r
);

173 ià((
key
 >ğ(
MOD_KEY_BEGIN
)è&& (key <ğ(
MOD_KEY_END
))) {

174 ià(
	`myg‘c
(
i¡r
è=ğ
MOD_KEY_DUMMY
)

175  
	`»tuºCh
((
key
è+ 
MOD_KEY_FLAG
);

176  
	`»tuºCh
(
UNDEFINED_KEY
);

178 ià((
key
 >ğ(
ARROW_KEY_BEGIN
)) &&

179 (
key
 <ğ(
ARROW_KEY_END
)))

180  
	`»tuºCh
((
key
è+ 
ARROW_KEY_FLAG
);

181  
	`»tuºCh
(
UNDEFINED_KEY
);

183 { 
	`myb“p
();  
	`g‘Ch¬
(
i¡r
); }

187 ià(
	`i¥ršt
(
ch
)è 
	`»tuºCh
(ch);

188  
	`»tuºCh
(
UNDEFINED_KEY
);

191  
	`»tuºCh
(
UNDEFINED_KEY
);

192 
	}
}

195 
šlše
 
P¬£Ch¬


196 
	$»tuºCh
(
ch
)

198 #iâdeà
MAKE_REF


199  
	`P¬£Ch¬
(
ch
);

201 
	`P¬£Ch¬
(
ch
)) {

202 
LINE_BEGIN_KEY
 :  
	`P¬£Ch¬
(
TA_LINE_BEGIN_KEY
);

203 
LINE_END_KEY
 :  
	`P¬£Ch¬
(
TA_LINE_END_KEY
);

204 
INPUT_END_KEY
 :  
	`P¬£Ch¬
(
TA_INPUT_END_KEY
);

205 
TAB_KEY
 :  
	`P¬£Ch¬
(
TA_TAB_KEY
);

206 
NEWLINE_KEY
 :  
	`P¬£Ch¬
(
TA_NEWLINE_KEY
);

207 
ESC_KEY
 :  
	`P¬£Ch¬
(
TA_ESC_KEY
);

208 
BACK_SPACE_KEY
 :  
	`P¬£Ch¬
(
TA_BACK_SPACE_KEY
);

209 
ARROW_KEY_FLAG
 :  
	`P¬£Ch¬
(
TA_ARROW_KEY_FLAG
);

210 
ARROW_KEY_INT
 :  
	`P¬£Ch¬
(
TA_ARROW_KEY_INT
);

211 
ARROW_UP_KEY
 :  
	`P¬£Ch¬
(
TA_ARROW_UP_KEY
);

212 
ARROW_DOWN_KEY
 :  
	`P¬£Ch¬
(
TA_ARROW_DOWN_KEY
);

213 
ARROW_RIGHT_KEY
:  
	`P¬£Ch¬
(
TA_ARROW_RIGHT_KEY
);

214 
ARROW_LEFT_KEY
 :  
	`P¬£Ch¬
(
TA_ARROW_LEFT_KEY
);

217 
MOD_KEY_FLAG
 :  
	`P¬£Ch¬
(
TA_MOD_KEY_FLAG
);

221 
HOME_KEY
 :  
	`P¬£Ch¬
(
TA_HOME_KEY
);

222 
INSERT_KEY
 :  
	`P¬£Ch¬
(
TA_INSERT_KEY
);

223 
DELETE_KEY
 :  
	`P¬£Ch¬
(
TA_DELETE_KEY
);

224 
END_KEY
 :  
	`P¬£Ch¬
(
TA_END_KEY
);

225 
PG_UP_KEY
 :  
	`P¬£Ch¬
(
TA_PG_UP_KEY
);

226 
PG_DOWN_KEY
 :  
	`P¬£Ch¬
(
TA_PG_DOWN_KEY
);

229 
MOD_KEY_DUMMY
 :  
	`P¬£Ch¬
(
TA_MOD_KEY_DUMMY
);

230 
UNDEFINED_KEY
 :  
	`P¬£Ch¬
(
TA_UNDEFINED_KEY
);

231 
BEEP_CHAR
 :  
	`P¬£Ch¬
(
TA_BEEP_CHAR
);

232 
BACK_SPACE_CHAR
:  
	`P¬£Ch¬
(
TA_BACK_SPACE_CHAR
);

233  :  
	`P¬£Ch¬
(
ch
);

236 
	}
}

	@src/cmd/cmdCharDef.h

8 #iâdeà
CMD_CHAR_DEF_H


9 
	#CMD_CHAR_DEF_H


	)

11 
	~<şim™s
>

15 
	#TA_LINE_BEGIN_KEY
 1

	)

16 
	#TA_LINE_END_KEY
 5

	)

17 
	#TA_INPUT_END_KEY
 4

	)

18 
	#TA_TAB_KEY
 ('\t')

	)

19 
	#TA_NEWLINE_KEY
 ('\n')

	)

20 
	#TA_ESC_KEY
 27

	)

21 
	#TA_BACK_SPACE_KEY
 127

	)

22 
	#TA_ARROW_KEY_FLAG
 (1 << 8)

	)

23 
	#TA_ARROW_KEY_INT
 91

	)

24 
	#TA_ARROW_UP_KEY
 (65 + 
TA_ARROW_KEY_FLAG
)

	)

25 
	#TA_ARROW_DOWN_KEY
 (66 + 
TA_ARROW_KEY_FLAG
)

	)

26 
	#TA_ARROW_RIGHT_KEY
 (67 + 
TA_ARROW_KEY_FLAG
)

	)

27 
	#TA_ARROW_LEFT_KEY
 (68 + 
TA_ARROW_KEY_FLAG
)

	)

28 
	#TA_ARROW_KEY_BEGIN
 
TA_ARROW_UP_KEY


	)

29 
	#TA_ARROW_KEY_END
 
TA_ARROW_LEFT_KEY


	)

30 
	#TA_MOD_KEY_FLAG
 (1 << 9)

	)

31 
	#TA_MOD_KEY_INT
 91

	)

32 
	#TA_HOME_KEY
 (49 + 
TA_MOD_KEY_FLAG
)

	)

33 
	#TA_INSERT_KEY
 (50 + 
TA_MOD_KEY_FLAG
)

	)

34 
	#TA_DELETE_KEY
 (51 + 
TA_MOD_KEY_FLAG
)

	)

35 
	#TA_END_KEY
 (52 + 
TA_MOD_KEY_FLAG
)

	)

36 
	#TA_PG_UP_KEY
 (53 + 
TA_MOD_KEY_FLAG
)

	)

37 
	#TA_PG_DOWN_KEY
 (54 + 
TA_MOD_KEY_FLAG
)

	)

38 
	#TA_MOD_KEY_BEGIN
 
TA_HOME_KEY


	)

39 
	#TA_MOD_KEY_END
 
TA_PG_DOWN_KEY


	)

40 
	#TA_MOD_KEY_DUMMY
 126

	)

41 
	#TA_UNDEFINED_KEY
 
INT_MAX


	)

42 
	#TA_BEEP_CHAR
 7

	)

43 
	#TA_BACK_SPACE_CHAR
 8

	)

46 #iâdeà
TA_KB_SETTING


55 
	eP¬£Ch¬


59 
	mLINE_BEGIN_KEY
 = 1,

60 
	mLINE_END_KEY
 = 5,

61 
	mINPUT_END_KEY
 = 4,

62 
	mTAB_KEY
 = ('\t'),

63 
	mNEWLINE_KEY
 = ('\n'),

64 
	mESC_KEY
 = 27,

79 
	mBACK_SPACE_KEY
 = 127,

83 
	mARROW_KEY_FLAG
 = 1 << 8,

84 
	mARROW_KEY_INT
 = 91,

85 
	mARROW_UP_KEY
 = 65 + 
ARROW_KEY_FLAG
,

86 
	mARROW_DOWN_KEY
 = 66 + 
ARROW_KEY_FLAG
,

87 
	mARROW_RIGHT_KEY
 = 67 + 
ARROW_KEY_FLAG
,

88 
	mARROW_LEFT_KEY
 = 68 + 
ARROW_KEY_FLAG
,

89 
	mARROW_KEY_BEGIN
 = 
ARROW_UP_KEY
,

90 
	mARROW_KEY_END
 = 
ARROW_LEFT_KEY
,

96 
	mMOD_KEY_FLAG
 = 1 << 9,

97 
	mMOD_KEY_INT
 = 91,

98 
	mHOME_KEY
 = 49 + 
MOD_KEY_FLAG
,

99 
	mINSERT_KEY
 = 50 + 
MOD_KEY_FLAG
,

100 
	mDELETE_KEY
 = 51 + 
MOD_KEY_FLAG
,

101 
	mEND_KEY
 = 52 + 
MOD_KEY_FLAG
,

102 
	mPG_UP_KEY
 = 53 + 
MOD_KEY_FLAG
,

103 
	mPG_DOWN_KEY
 = 54 + 
MOD_KEY_FLAG
,

104 
	mMOD_KEY_BEGIN
 = 
HOME_KEY
,

105 
	mMOD_KEY_END
 = 
PG_DOWN_KEY
,

106 
	mMOD_KEY_DUMMY
 = 126,

110 
	mUNDEFINED_KEY
 = 
INT_MAX
,

113 
	mBEEP_CHAR
 = 7,

114 
	mBACK_SPACE_CHAR
 = 8,

117 
	mPARSE_CHAR_END


127 
	eP¬£Ch¬


131 
	mLINE_BEGIN_KEY
 = 
TA_LINE_BEGIN_KEY
,

132 
	mLINE_END_KEY
 = 
TA_LINE_END_KEY
,

133 
	mINPUT_END_KEY
 = 
TA_INPUT_END_KEY
,

134 
	mTAB_KEY
 = 
TA_TAB_KEY
,

135 
	mNEWLINE_KEY
 = 
TA_NEWLINE_KEY
,

136 
	mESC_KEY
 = 
TA_ESC_KEY
,

151 
	mBACK_SPACE_KEY
 = 
TA_BACK_SPACE_KEY
,

155 
	mARROW_KEY_FLAG
 = 
TA_ARROW_KEY_FLAG
,

156 
	mARROW_KEY_INT
 = 
TA_ARROW_KEY_INT
,

157 
	mARROW_UP_KEY
 = 
TA_ARROW_UP_KEY
,

158 
	mARROW_DOWN_KEY
 = 
TA_ARROW_DOWN_KEY
,

159 
	mARROW_RIGHT_KEY
 = 
TA_ARROW_RIGHT_KEY
,

160 
	mARROW_LEFT_KEY
 = 
TA_ARROW_LEFT_KEY
,

161 
	mARROW_KEY_BEGIN
 = 
TA_ARROW_KEY_BEGIN
,

162 
	mARROW_KEY_END
 = 
TA_ARROW_KEY_END
,

168 
	mMOD_KEY_FLAG
 = 
TA_MOD_KEY_FLAG
,

169 
	mMOD_KEY_INT
 = 
TA_MOD_KEY_INT
,

170 
	mHOME_KEY
 = 
TA_HOME_KEY
,

171 
	mINSERT_KEY
 = 
TA_INSERT_KEY
,

172 
	mDELETE_KEY
 = 
TA_DELETE_KEY
,

173 
	mEND_KEY
 = 
TA_END_KEY
,

174 
	mPG_UP_KEY
 = 
TA_PG_UP_KEY
,

175 
	mPG_DOWN_KEY
 = 
TA_PG_DOWN_KEY
,

176 
	mMOD_KEY_BEGIN
 = 
TA_MOD_KEY_BEGIN
,

177 
	mMOD_KEY_END
 = 
TA_MOD_KEY_END
,

178 
	mMOD_KEY_DUMMY
 = 
TA_MOD_KEY_DUMMY
,

182 
	mUNDEFINED_KEY
 = 
TA_UNDEFINED_KEY
,

185 
	mBEEP_CHAR
 = 
TA_BEEP_CHAR
,

186 
	mBACK_SPACE_CHAR
 = 
TA_BACK_SPACE_CHAR
,

189 
	mPARSE_CHAR_END


	@src/cmd/cmdCommon.cpp

8 
	~<iomª
>

9 
	~<¡ršg
>

10 
	~"ut.h
"

11 
	~"cmdCommÚ.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

15 
boŞ


16 
	$š™CommÚCmd
()

18 ià(!(
cmdMgr
->
	`»gCmd
("Qu™", 1, 
Ãw
 
Qu™Cmd
) &&

19 
cmdMgr
->
	`»gCmd
("HIStÜy", 3, 
Ãw
 
Hi¡ÜyCmd
) &&

20 
cmdMgr
->
	`»gCmd
("HELp", 3, 
Ãw
 
H–pCmd
) &&

21 
cmdMgr
->
	`»gCmd
("DOfe", 2, 
Ãw
 
DofeCmd
)

23 
û¼
 << "Regi¡”šg \"š™\" commªd çs...ƒx™šg" << 
’dl
;

24  
çl£
;

26  
Œue
;

27 
	}
}

33 
CmdExecStus


34 
	gH–pCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

37 
¡ršg
 
tok’
;

38 ià(!
CmdExec
::
	`ËxSšgËO±iÚ
(
İtiÚ
, 
tok’
))

39  
CMD_EXEC_ERROR
;

40 ià(
tok’
.
	`size
()) {

41 
CmdExec
* 
e
 = 
cmdMgr
->
	`g‘Cmd
(
tok’
);

42 ià(!
e
è 
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
tok’
);

43 
e
->
	`u§ge
(
cout
);

46 
cmdMgr
->
	`´štH–ps
();

47  
CMD_EXEC_DONE
;

48 
	}
}

51 
	gH–pCmd
::
	$u§ge
(
o¡»am
& 
os
) const

53 
os
 << "U§ge: HEL°[(¡ršg cmd)]" << 
’dl
;

54 
	}
}

57 
	gH–pCmd
::
	$h–p
() const

59 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "HELp: "

60 << "´šˆthi h–°mes§ge" << 
’dl
;

61 
	}
}

66 
CmdExecStus


67 
	gQu™Cmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

70 
¡ršg
 
tok’
;

71 ià(!
CmdExec
::
	`ËxSšgËO±iÚ
(
İtiÚ
, 
tok’
))

72  
CMD_EXEC_ERROR
;

73 ià(
tok’
.
	`size
()) {

74 ià(
	`mySŒNCmp
("-FÜûd", 
tok’
, 2) != 0)

75  
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
tok’
);

77  
CMD_EXEC_QUIT
;

80 
cout
 << "Are you sureo quit (Yes/No)? [No] ";

81 
¡r
[1024];

82 
cš
.
	`g‘lše
(
¡r
, 1024);

83 
¡ršg
 
ss
 = 
	`¡ršg
(
¡r
);

84 
size_t
 
s
 = 
ss
.
	`fšd_fœ¡_nÙ_of
(' ', 0);

85 ià(
s
 !ğ
¡ršg
::
Åos
) {

86 
ss
 = ss.
	`sub¡r
(
s
);

87 ià(
	`mySŒNCmp
("Yes", 
ss
, 1) == 0)

88  
CMD_EXEC_QUIT
;

90  
CMD_EXEC_DONE
;

91 
	}
}

94 
	gQu™Cmd
::
	$u§ge
(
o¡»am
& 
os
) const

96 
os
 << "U§ge: Qu™ [-FÜû]" << 
’dl
;

97 
	}
}

100 
	gQu™Cmd
::
	$h–p
() const

102 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "Quit: "

103 << "qu™hexecutiÚ" << 
’dl
;

104 
	}
}

109 
CmdExecStus


110 
	gHi¡ÜyCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

113 
¡ršg
 
tok’
;

114 ià(!
CmdExec
::
	`ËxSšgËO±iÚ
(
İtiÚ
, 
tok’
))

115  
CMD_EXEC_ERROR
;

116 
nPršt
 = -1;

117 ià(
tok’
.
	`size
()) {

118 ià(!
	`mySŒ2IÁ
(
tok’
, 
nPršt
))

119  
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
tok’
);

122 
cmdMgr
->
	`´štHi¡Üy
(
nPršt
);

124  
CMD_EXEC_DONE
;

125 
	}
}

128 
	gHi¡ÜyCmd
::
	$u§ge
(
o¡»am
& 
os
) const

130 
os
 << "U§ge: HIStÜy [(šˆnPršt)]" << 
’dl
;

131 
	}
}

134 
	gHi¡ÜyCmd
::
	$h–p
() const

136 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "HIStory: "

137 << "´šˆcommªd hi¡Üy" << 
’dl
;

138 
	}
}

161 
CmdExecStus


162 
	gDofeCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

165 
¡ršg
 
tok’
;

166 ià(!
CmdExec
::
	`ËxSšgËO±iÚ
(
İtiÚ
, 
tok’
, 
çl£
))

167  
CMD_EXEC_ERROR
;

168 ià(!
cmdMgr
->
	`İ’Dofe
(
tok’
))

169  
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_FOPEN_FAIL
, 
tok’
);

170  
CMD_EXEC_DONE
;

171 
	}
}

174 
	gDofeCmd
::
	$u§ge
(
o¡»am
& 
os
) const

176 
os
 << "U§ge: DOf<(¡ršg fe)>" << 
’dl
;

177 
	}
}

180 
	gDofeCmd
::
	$h–p
() const

182 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DOfile: "

183 << "execu‹hcommªd šhdofe" << 
’dl
;

184 
	}
}

	@src/cmd/cmdCommon.h

8 #iâdeà
CMD_COMMON_H


9 
	#CMD_COMMON_H


	)

11 
	~"cmdP¬£r.h
"

13 
CmdCÏss
(
H–pCmd
);

14 
CmdCÏss
(
Qu™Cmd
);

15 
CmdCÏss
(
Hi¡ÜyCmd
);

16 
CmdCÏss
(
DofeCmd
);

17 
CmdCÏss
(
U§geCmd
);

	@src/cmd/cmdParser.cpp

8 
	~<ÿs£¹
>

9 
	~<io¡»am
>

10 
	~<iomª
>

11 
	~<c¡dlib
>

12 
	~"ut.h
"

13 
	~"cmdP¬£r.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

20 
myb“p
();

28 
boŞ


29 
	gCmdP¬£r
::
	$İ’Dofe
(cÚ¡ 
¡ršg
& 
dof
)

32 
_dofe
 = 
Ãw
 
	`if¡»am
(
dof
.
	`c_¡r
());

33  
Œue
;

34 
	}
}

38 
	gCmdP¬£r
::
	$şo£Dofe
()

40 
	`as£¹
(
_dofe
 != 0);

42 
d–‘e
 
_dofe
;

43 
	}
}

46 
boŞ


47 
	gCmdP¬£r
::
	$»gCmd
(cÚ¡ 
¡ršg
& 
cmd
, 
nCmp
, 
CmdExec
* 
e
)

50 
¡ršg
 
¡r
 = 
cmd
;

51 
s
 = 
¡r
.
	`size
();

52 ià(
s
 < 
nCmp
è 
çl£
;

53 
Œue
) {

54 ià(
	`g‘Cmd
(
¡r
)è 
çl£
;

55 ià(
s
 =ğ
nCmp
) ;

56 
¡r
.
	`»size
(--
s
);

63 
	`as£¹
(
¡r
.
	`size
(è=ğ
nCmp
);

64 
¡ršg
& 
mªdCmd
 = 
¡r
;

65 
i
 = 0; i < 
nCmp
; ++i)

66 
mªdCmd
[
i
] = 
	`touµ”
(mandCmd[i]);

67 
¡ršg
 
İtCmd
 = 
cmd
.
	`sub¡r
(
nCmp
);

68 
	`as£¹
(
e
 != 0);

69 
e
->
	`£tO±Cmd
(
İtCmd
);

72  (
_cmdM­
.
	`š£¹
(
	`CmdRegPaœ
(
mªdCmd
, 
e
))).
£cÚd
;

73 
	}
}

76 
CmdExecStus


77 
	gCmdP¬£r
::
	$execOÃCmd
()

79 
boŞ
 
ÃwCmd
 = 
çl£
;

80 ià(
_dofe
 != 0)

81 
ÃwCmd
 = 
	`»adCmd
(*
_dofe
);

83 
ÃwCmd
 = 
	`»adCmd
(
cš
);

86 ià(
ÃwCmd
) {

87 
¡ršg
 
İtiÚ
;

88 
CmdExec
* 
e
 = 
	`·r£Cmd
(
İtiÚ
);

89 ià(
e
 != 0)

90  
e
->
	`exec
(
İtiÚ
);

92  
CMD_EXEC_NOP
;

93 
	}
}

98 
	gCmdP¬£r
::
	$´štH–ps
() const

101 
	}
}

104 
CmdP¬£r
::
	$´štHi¡Üy
(
nPršt
) const

106 
	`as£¹
(
_‹mpCmdStÜed
 =ğ
çl£
);

107 ià(
_hi¡Üy
.
	`em±y
()) {

108 
cout
 << "Em±y commªd hi¡Üy!!" << 
’dl
;

111 
s
 = 
_hi¡Üy
.
	`size
();

112 ià((
nPršt
 < 0è|| (nPršˆ> 
s
))

113 
nPršt
 = 
s
;

114 
i
 = 
s
 - 
nPršt
; i < s; ++i)

115 
cout
 << " " << 
i
 << ": " << 
_hi¡Üy
[i] << 
’dl
;

116 
	}
}

134 
CmdExec
*

135 
	gCmdP¬£r
::
	$·r£Cmd
(
¡ršg
& 
İtiÚ
)

137 
	`as£¹
(
_‹mpCmdStÜed
 =ğ
çl£
);

138 
	`as£¹
(!
_hi¡Üy
.
	`em±y
());

139 
¡ršg
 
¡r
 = 
_hi¡Üy
.
	`back
();

142 
	`as£¹
(
¡r
[0] != 0 && str[0] != ' ');

143  
NULL
;

144 
	}
}

289 
	gCmdP¬£r
::
	$li¡Cmd
(cÚ¡ 
¡ršg
& 
¡r
)

292 
	}
}

305 
CmdExec
*

306 
CmdP¬£r
::
	$g‘Cmd
(
¡ršg
 
cmd
)

308 
CmdExec
* 
e
 = 0;

310  
e
;

311 
	}
}

318 
boŞ


319 
	gCmdExec
::
	$ËxNoO±iÚ
(cÚ¡ 
¡ršg
& 
İtiÚ
) const

321 
¡ršg
 
”r
;

322 
	`mySŒG‘Tok
(
İtiÚ
, 
”r
);

323 ià(
”r
.
	`size
()) {

324 
	`”rÜO±iÚ
(
CMD_OPT_EXTRA
, 
”r
);

325  
çl£
;

327  
Œue
;

328 
	}
}

334 
boŞ


335 
	gCmdExec
::
ËxSšgËO±iÚ


336 (cÚ¡ 
¡ršg
& 
İtiÚ
, 
	g¡ršg
& 
	gtok’
, 
boŞ
 
	gİtiÚ®
) const

338 
size_t
 
	gn
 = 
mySŒG‘Tok
(
İtiÚ
, 
tok’
);

339 ià(!
	gİtiÚ®
) {

340 ià(
	gtok’
.
size
() == 0) {

341 
”rÜO±iÚ
(
CMD_OPT_MISSING
, "");

342  
	gçl£
;

345 ià(
	gn
 !ğ
¡ršg
::
Åos
) {

346 
”rÜO±iÚ
(
CMD_OPT_EXTRA
, 
İtiÚ
.
sub¡r
(
n
));

347  
	gçl£
;

349  
	gŒue
;

355 
boŞ


356 
	gCmdExec
::
ËxO±iÚs


357 (cÚ¡ 
¡ršg
& 
İtiÚ
, 
	gveùÜ
<
	g¡ršg
>& 
	gtok’s
, 
size_t
 
	gnO±s
) const

359 
¡ršg
 
	gtok’
;

360 
size_t
 
	gn
 = 
mySŒG‘Tok
(
İtiÚ
, 
tok’
);

361 
	gtok’
.
size
()) {

362 
	gtok’s
.
push_back
(
tok’
);

363 
	gn
 = 
mySŒG‘Tok
(
İtiÚ
, 
tok’
, 
n
);

365 ià(
	gnO±s
 != 0) {

366 ià(
tok’s
.
size
(è< 
nO±s
) {

367 
”rÜO±iÚ
(
CMD_OPT_MISSING
, "");

368  
	gçl£
;

370 ià(
	gtok’s
.
size
(è> 
	gnO±s
) {

371 
”rÜO±iÚ
(
CMD_OPT_EXTRA
, 
tok’s
[
nO±s
]);

372  
	gçl£
;

375  
	gŒue
;

378 
CmdExecStus


379 
	gCmdExec
::
	$”rÜO±iÚ
(
CmdO±iÚE¼Ü
 
”r
, cÚ¡ 
¡ršg
& 
İt
) const

381 
”r
) {

382 
CMD_OPT_MISSING
:

383 
û¼
 << "Error: Missing option";

384 ià(
İt
.
	`size
()è
û¼
 << "‡fter (" << opt << ")";

385 
û¼
 << "!!" << 
’dl
;

387 
CMD_OPT_EXTRA
:

388 
û¼
 << "E¼Ü: ExŒ¨İtiÚ!! (" << 
İt
 << ")" << 
’dl
;

390 
CMD_OPT_ILLEGAL
:

391 
û¼
 << "E¼Ü: IÎeg® o±iÚ!! (" << 
İt
 << ")" << 
’dl
;

393 
CMD_OPT_FOPEN_FAIL
:

394 
û¼
 << "E¼Ü: cªnÙ o³Àf\"" << 
İt
 << "\"!!" << 
’dl
;

397 
û¼
 << "E¼Ü: UnknowÀİtiÚƒ¼Üy³!! (" << 
”r
 << ")" << 
’dl
;

398 
	`ex™
(-1);

400  
CMD_EXEC_ERROR
;

401 
	}
}

	@src/cmd/cmdParser.h

8 #iâdeà
CMD_PARSER_H


9 
	#CMD_PARSER_H


	)

11 
	~<io¡»am
>

12 
	~<f¡»am
>

13 
	~<¡ršg
>

14 
	~<veùÜ
>

15 
	~<m­
>

16 
	~<¡ack
>

18 
	~"cmdCh¬Def.h
"

20 
usšg
 
Çme¥aû
 
	g¡d
;

26 
şass
 
	gCmdExec
;

27 
şass
 
	gCmdP¬£r
;

33 
CmdP¬£r
* 
cmdMgr
;

39 
	eCmdExecStus


41 
	mCMD_EXEC_DONE
 = 0,

42 
	mCMD_EXEC_ERROR
 = 1,

43 
	mCMD_EXEC_QUIT
 = 2,

44 
	mCMD_EXEC_NOP
 = 3,

47 
	mCMD_EXEC_TOT


50 
	eCmdO±iÚE¼Ü


52 
	mCMD_OPT_MISSING
 = 0,

53 
	mCMD_OPT_EXTRA
 = 1,

54 
	mCMD_OPT_ILLEGAL
 = 2,

55 
	mCMD_OPT_FOPEN_FAIL
 = 3,

58 
	mCMD_OPT_ERROR_TOT


66 şas 
	cCmdExec


68 
	mpublic
:

69 
	$CmdExec
() {}

70 
vœtu®
 ~
	$CmdExec
(è{
	}
}

72 
vœtu®
 
CmdExecStus
 
exec
(cÚ¡ 
¡ršg
&) = 0;

73 
vœtu®
 
	$u§ge
(
o¡»am
&) const = 0;

74 
vœtu®
 
	$h–p
() const = 0;

76 
	$£tO±Cmd
(cÚ¡ 
¡ršg
& 
¡r
è{ 
_İtCmd
 = sŒ; 
	}
}

77 cÚ¡ 
	g¡ršg
& 
	$g‘O±Cmd
(ècÚ¡ {  
_İtCmd
; 
	}
}

79 
	g´Ùeùed
:

80 
boŞ
 
	$ËxNoO±iÚ
(cÚ¡ 
¡ršg
&) const;

81 
boŞ
 
	$ËxSšgËO±iÚ
(cÚ¡ 
¡ršg
&, sŒšg&, 
boŞ
 
İtiÚ®
 = 
Œue
) const;

82 
boŞ
 
	`ËxO±iÚs
(cÚ¡ 
¡ršg
&, 
veùÜ
<¡ršg>&, 
size_t
 
nO±s
 = 0) const;

83 
CmdExecStus
 
	$”rÜO±iÚ
(
CmdO±iÚE¼Ü
 
”r
, cÚ¡ 
¡ršg
& 
İt
) const;

85 
´iv©e
:

86 
¡ršg
 
_İtCmd
;

87 
	}
};

89 
	#CmdCÏss
(
T
) \

90 
şass
 
T
: 
public
 
CmdExec
 \

92 
public
: \

93 
	`T
() {} \

94 ~
	`T
() {} \

95 
CmdExecStus
 
	`exec
(cÚ¡ 
¡ršg
& 
İtiÚ
); \

96 
	`u§ge
(
o¡»am
& 
os
) const; \

97 
	`h–p
() const; \

98 }

	)

105 şas 
	cCmdP¬£r


107 
	#READ_BUF_SIZE
 65536

	)

108 
	#PG_OFFSET
 10

	)

110 
	mm­
<cÚ¡ 
	t¡ršg
, 
	tCmdExec
*> 
	tCmdM­
;

111 
	m·œ
<cÚ¡ 
	t¡ršg
, 
	tCmdExec
*> 
	tCmdRegPaœ
;

113 
	mpublic
:

114 
	$CmdP¬£r
(cÚ¡ 
¡ršg
& 
p
è: 
	`_´om±
Õ), 
	`_dofe
(0),

115 
	`_»adBufPŒ
(
_»adBuf
), 
	`_»adBufEnd
(_readBuf),

116 
	`_hi¡ÜyIdx
(0), 
	`_bP»ssCouÁ
(0), 
	$_‹mpCmdStÜed
(
çl£
) {}

117 
vœtu®
 ~
	$CmdP¬£r
(è{
	}
}

119 
boŞ
 
İ’Dofe
(cÚ¡ 
¡ršg
& 
dof
);

120 
şo£Dofe
();

122 
boŞ
 
»gCmd
(cÚ¡ 
¡ršg
&, , 
CmdExec
*);

123 
CmdExecStus
 
execOÃCmd
();

124 
	$´štH–ps
() const;

127 
	`´štHi¡Üy
(
nPršt
 = -1) const;

128 
CmdExec
* 
	`g‘Cmd
(
¡ršg
);

130 
´iv©e
:

132 
	$»£tBufAndPrštProm±
() {

133 
_»adBufPŒ
 = 
_»adBufEnd
 = 
_»adBuf
;

134 *
_»adBufPŒ
 = 0;

135 
_bP»ssCouÁ
 = 0;

136 
	`´štProm±
();

137 
	}
}

138 
P¬£Ch¬
 
	$g‘Ch¬
(
i¡»am
&) const;

139 
boŞ
 
	`»adCmd
(
i¡»am
&);

140 
CmdExec
* 
	`·r£Cmd
(
¡ršg
&);

141 
	`li¡Cmd
(cÚ¡ 
¡ršg
&);

142 
	$´štProm±
(ècÚ¡ { 
cout
 << 
_´om±
; 
	}
}

145 
boŞ
 
moveBufPŒ
(* const);

146 
boŞ
 
d–‘eCh¬
();

147 
š£¹Ch¬
(, = 1);

148 
d–‘eLše
();

149 
»´štCmd
();

150 
moveToHi¡Üy
(
šdex
);

151 
boŞ
 
addHi¡Üy
();

152 
»Œ›veHi¡Üy
();

153 #ifdeà
TA_KB_SETTING


154 
	$Te¡OÆy
(è{
	}
}

158 cÚ¡ 
¡ršg
 
	g_´om±
;

159 
if¡»am
* 
	g_dofe
;

160 
	g_»adBuf
[
READ_BUF_SIZE
];

162 * 
	g_»adBufPŒ
;

164 * 
	g_»adBufEnd
;

166 
	gveùÜ
<
	g¡ršg
> 
	g_hi¡Üy
;

167 
	g_hi¡ÜyIdx
;

171 
size_t
 
	g_bP»ssCouÁ
;

172 
boŞ
 
	g_‹mpCmdStÜed
;

176 
CmdM­
 
	g_cmdM­
;

177 
	g¡ack
<
	gif¡»am
*> 
	g_dofeSck
;

	@src/db/dbCmd.h

8 #iâdeà
DB_CMD_H


9 
	#DB_CMD_H


	)

11 
	~"cmdP¬£r.h
"

13 
CmdCÏss
(
DBAµ’dCmd
);

14 
CmdCÏss
(
DBAveCmd
);

15 
CmdCÏss
(
DBCouÁCmd
);

16 
CmdCÏss
(
DBMaxCmd
);

17 
CmdCÏss
(
DBMšCmd
);

18 
CmdCÏss
(
DBPrštCmd
);

19 
CmdCÏss
(
DBR—dCmd
);

20 
CmdCÏss
(
DBSÜtCmd
);

21 
CmdCÏss
(
DBSumCmd
);

	@src/db/dbcmd.cpp

8 
	~<io¡»am
>

9 
	~<iomª
>

10 
	~<ÿs£¹
>

11 
	~<cm©h
>

12 
	~"ut.h
"

13 
	~"dbCmd.h
"

14 
	~"dbJsÚ.h
"

17 
DBJsÚ
 
	gdbjsÚ
;

19 
boŞ


20 
	$š™DbCmd
()

23 if(!(
cmdMgr
->
	`»gCmd
("DBAP³nd", 4, 
Ãw
 
DBAµ’dCmd
) &&

24 
cmdMgr
->
	`»gCmd
("DBAV”age", 4, 
Ãw
 
DBAveCmd
) &&

25 
cmdMgr
->
	`»gCmd
("DBCouÁ", 3, 
Ãw
 
DBCouÁCmd
) &&

26 
cmdMgr
->
	`»gCmd
("DBMAx", 4, 
Ãw
 
DBMaxCmd
) &&

27 
cmdMgr
->
	`»gCmd
("DBMIn", 4, 
Ãw
 
DBMšCmd
) &&

28 
cmdMgr
->
	`»gCmd
("DBPršt", 3, 
Ãw
 
DBPrštCmd
) &&

29 
cmdMgr
->
	`»gCmd
("DBR—d", 3, 
Ãw
 
DBR—dCmd
) &&

30 
cmdMgr
->
	`»gCmd
("DBSO¹", 4, 
Ãw
 
DBSÜtCmd
) &&

31 
cmdMgr
->
	`»gCmd
("DBSUm", 4, 
Ãw
 
DBSumCmd
))

33 
û¼
 << "Regi¡”šg \"š™\" commªd çs...ƒx™šg" << 
’dl
;

34  
çl£
;

36  
Œue
;

37 
	}
}

42 
CmdExecStus


43 
	gDBAµ’dCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

47 
veùÜ
<
¡ršg
> 
İtiÚs
;

48 if(!
this
->
	`ËxO±iÚs
(
İtiÚ
, 
İtiÚs
, 2)è 
CMD_EXEC_ERROR
;

50 
¡ršg
 
key
 = 
İtiÚs
[0];

51 
v®ue
;

53 if(!
	`isV®idV¬Name
(
İtiÚs
[0]))

54  
this
->
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
İtiÚs
[0]);

56 if(!
	`mySŒ2IÁ
(
İtiÚs
[1], 
v®ue
))

57  
this
->
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
İtiÚs
[1]);

60 
DBJsÚEËm
 
	`–em
(
key
, 
v®ue
);

61 if(!
dbjsÚ
.
	`add
(
–em
))

62 
û¼
 << "E¼Ü: EËm’ˆw™h key \"" << 
key
 << "\"‡Ì—dyƒxi¡s!!" << 
’dl
;

65  
CMD_EXEC_DONE
;

67 
	}
}

70 
	gDBAµ’dCmd
::
	$u§ge
(
o¡»am
& 
os
) const

72 
os
 << "U§ge: DBAP³nd <(¡ršg key)><(šˆv®ue)>" << 
’dl
;

73 
	}
}

76 
	gDBAµ’dCmd
::
	$h–p
() const

78 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBAPpend: "

79 << "­³nd‡ÀJSONƒËm’ˆ(key-v®u·œètØth’d oàDB" << 
’dl
;

80 
	}
}

86 
CmdExecStus


87 
	gDBAveCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

90 ià(!
CmdExec
::
	`ËxNoO±iÚ
(
İtiÚ
))

91  
CMD_EXEC_ERROR
;

93 
a
 = 
dbjsÚ
.
	`ave
();

94 ià(
a
 =ğ
NAN
) {

95 
û¼
 << "E¼Ü: Thav”agoàthDB i Çn." << 
’dl
;

96  
CMD_EXEC_ERROR
;

98 
ios_ba£
::
fmtæags
 
ÜigFÏgs
 = 
cout
.
	`æags
();

99 
cout
 << "Thav”agoàthDB i " << 
fixed


100 << 
	`£»cisiÚ
(2è<< 
a
 << ".\n";

101 
cout
.
	`æags
(
ÜigFÏgs
);

103  
CMD_EXEC_DONE
;

104 
	}
}

107 
	gDBAveCmd
::
	$u§ge
(
o¡»am
& 
os
) const

109 
os
 << "U§ge: DBAV”age" << 
’dl
;

110 
	}
}

113 
	gDBAveCmd
::
	$h–p
() const

115 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBAVerage: "

116 << "compu‹hav”agoàthDB" << 
’dl
;

117 
	}
}

123 
CmdExecStus


124 
	gDBCouÁCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

127 ià(!
CmdExec
::
	`ËxNoO±iÚ
(
İtiÚ
))

128  
CMD_EXEC_ERROR
;

130 
size_t
 
n
 = 
dbjsÚ
.
	`size
();

131 ià(
n
 > 1)

132 
cout
 << "Th”¬" << 
n
 << " JSONƒËm’t š DB." << 
’dl
;

133 ià(
n
 == 1)

134 
cout
 << "Th”i 1 JSONƒËm’ˆš DB." << 
’dl
;

136 
cout
 << "Th”i nØJSONƒËm’ˆš DB." << 
’dl
;

138  
CMD_EXEC_DONE
;

139 
	}
}

142 
	gDBCouÁCmd
::
	$u§ge
(
o¡»am
& 
os
) const

144 
os
 << "U§ge: DBCouÁ" << 
’dl
;

145 
	}
}

148 
	gDBCouÁCmd
::
	$h–p
() const

150 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBCount: "

151 << "»pÜˆthnumb” oàJSONƒËm’t šhDB" << 
’dl
;

152 
	}
}

158 
CmdExecStus


159 
	gDBMaxCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

162 ià(!
CmdExec
::
	`ËxNoO±iÚ
(
İtiÚ
))

163  
CMD_EXEC_ERROR
;

165 
size_t
 
maxI
;

166 
maxN
 = 
dbjsÚ
.
	`max
(
maxI
);

167 ià(
maxN
 =ğ
INT_MIN
) {

168 
û¼
 << "E¼Ü: Thmax JSONƒËm’ˆi Çn." << 
’dl
;

169  
CMD_EXEC_ERROR
;

171 
cout
 << "Thmax JSONƒËm’ˆi { " << 
dbjsÚ
[
maxI
] << " }." << 
’dl
;

173  
CMD_EXEC_DONE
;

174 
	}
}

177 
	gDBMaxCmd
::
	$u§ge
(
o¡»am
& 
os
) const

179 
os
 << "U§ge: DBMAx" << 
’dl
;

180 
	}
}

183 
	gDBMaxCmd
::
	$h–p
() const

185 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBMAx: "

186 << "»pÜˆthmaximum JSONƒËm’t" << 
’dl
;

187 
	}
}

193 
CmdExecStus


194 
	gDBMšCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

197 ià(!
CmdExec
::
	`ËxNoO±iÚ
(
İtiÚ
))

198  
CMD_EXEC_ERROR
;

200 
size_t
 
mšI
;

201 
mšN
 = 
dbjsÚ
.
	`mš
(
mšI
);

202 ià(
mšN
 =ğ
INT_MAX
) {

203 
û¼
 << "E¼Ü: Thmš JSONƒËm’ˆi Çn." << 
’dl
;

204  
CMD_EXEC_ERROR
;

206 
cout
 << "Thmš JSONƒËm’ˆi { " << 
dbjsÚ
[
mšI
] << " }." << 
’dl
;

208  
CMD_EXEC_DONE
;

209 
	}
}

212 
	gDBMšCmd
::
	$u§ge
(
o¡»am
& 
os
) const

214 
os
 << "U§ge: DBMIn" << 
’dl
;

215 
	}
}

218 
	gDBMšCmd
::
	$h–p
() const

220 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBMIn: "

221 << "»pÜˆthmšimum JSONƒËm’t" << 
’dl
;

222 
	}
}

228 
CmdExecStus


229 
	gDBPrštCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

232 
¡ršg
 
tok’
;

233 if(!
this
->
	`ËxSšgËO±iÚ
(
İtiÚ
, 
tok’
)è 
CMD_EXEC_ERROR
;

235 if(
tok’
.
	`size
()){

236 
veùÜ
<
¡ršg
>::
size_ty³
 
i
; i!=
dbjsÚ
.
	`size
(); i++){

237 if(
dbjsÚ
[
i
].
	`key
(è=ğ
tok’
è
cout
 << dbjsÚ[i] << 
’dl
;

238 
û¼
 << "E¼Ü: NØJSONƒËm’ˆw™h key\"" << 
tok’
 << "\" i found." << 
’dl
;

242 
cout
 << 
dbjsÚ
 << 
’dl
;

244  
CMD_EXEC_DONE
;

245 
	}
}

248 
	gDBPrštCmd
::
	$u§ge
(
o¡»am
& 
os
) const

250 
os
 << "DBPršˆ[(¡ršg key)]" << 
’dl
;

251 
	}
}

254 
	gDBPrštCmd
::
	$h–p
() const

256 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBPrint: "

257 << "´šˆthJSONƒËm’t(sèšhDB" << 
’dl
;

258 
	}
}

264 
CmdExecStus


265 
	gDBR—dCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

268 
veùÜ
<
¡ršg
> 
İtiÚs
;

269 ià(!
CmdExec
::
	`ËxO±iÚs
(
İtiÚ
, 
İtiÚs
))

270  
CMD_EXEC_ERROR
;

272 ià(
İtiÚs
.
	`em±y
())

273  
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_MISSING
, "");

275 
boŞ
 
doR•Ïû
 = 
çl£
;

276 
¡ršg
 
feName
;

277 
size_t
 
i
 = 0, 
n
 = 
İtiÚs
.
	`size
(); i <‚; ++i) {

278 ià(
	`mySŒNCmp
("-R•Ïû", 
İtiÚs
[
i
], 2) == 0) {

279 ià(
doR•Ïû
è 
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_EXTRA
,
İtiÚs
[
i
]);

280 
doR•Ïû
 = 
Œue
;

283 ià(
feName
.
	`size
())

284  
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
İtiÚs
[
i
]);

285 
feName
 = 
İtiÚs
[
i
];

289 
if¡»am
 
	`ifs
(
feName
.
	`c_¡r
());

290 ià(!
ifs
) {

291 
û¼
 << "E¼Ü: \"" << 
feName
 << "\" dÛ nÙƒxi¡!!" << 
’dl
;

292  
CMD_EXEC_ERROR
;

295 ià(
dbjsÚ
) {

296 ià(!
doR•Ïû
) {

297 
û¼
 << "Error: DBƒxists. Use \"-Replace\" option for "

299  
CMD_EXEC_ERROR
;

301 
cout
 << "DB i »¶aûd..." << 
’dl
;

302 
dbjsÚ
.
	`»£t
();

305 
ifs
 >> 
dbjsÚ
;

306 
cout
 << "\"" << 
feName
 << "\" wa »ad iÀsucûssfuÎy." << 
’dl
;

308  
CMD_EXEC_DONE
;

309 
	}
}

312 
	gDBR—dCmd
::
	$u§ge
(
o¡»am
& 
os
) const

314 
os
 << "U§ge: DBR—d <(¡ršg jsÚFe)> [-R•Ïû]" << 
’dl
;

315 
	}
}

318 
	gDBR—dCmd
::
	$h–p
() const

320 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBRead: "

321 << "»ad d©¨äom .jsÚ fe" << 
’dl
;

322 
	}
}

328 
CmdExecStus


329 
	gDBSÜtCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

332 
¡ršg
 
tok’
;

333 ià(!
CmdExec
::
	`ËxSšgËO±iÚ
(
İtiÚ
, 
tok’
, 
çl£
))

334  
CMD_EXEC_ERROR
;

336 ià(
	`mySŒNCmp
("-Key", 
tok’
, 2è=ğ0è
dbjsÚ
.
	`sÜt
(
	`DBSÜtKey
());

337 ià(
	`mySŒNCmp
("-V®ue", 
tok’
, 2è=ğ0è
dbjsÚ
.
	`sÜt
(
	`DBSÜtV®ue
());

338  
CmdExec
::
	`”rÜO±iÚ
(
CMD_OPT_ILLEGAL
, 
tok’
);

340  
CMD_EXEC_DONE
;

341 
	}
}

344 
	gDBSÜtCmd
::
	$u§ge
(
o¡»am
& 
os
) const

346 
os
 << "U§ge: DBSO¹ <-Key | -V®ue>" << 
’dl
;

347 
	}
}

350 
	gDBSÜtCmd
::
	$h–p
() const

352 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBSOrt: "

353 << "sÜˆthJSON objeù by key o¸v®ue" << 
’dl
;

354 
	}
}

360 
CmdExecStus


361 
	gDBSumCmd
::
	$exec
(cÚ¡ 
¡ršg
& 
İtiÚ
)

364 ià(!
CmdExec
::
	`ËxNoO±iÚ
(
İtiÚ
))

365  
CMD_EXEC_ERROR
;

367 ià(
dbjsÚ
.
	`em±y
()) {

368 
û¼
 << "E¼Ü: Thsum oàthDB i Çn." << 
’dl
;

369  
CMD_EXEC_ERROR
;

371 
cout
 << "Thsum oàthDB i " << 
dbjsÚ
.
	`sum
(è<< "." << 
’dl
;

373  
CMD_EXEC_DONE
;

374 
	}
}

377 
	gDBSumCmd
::
	$u§ge
(
o¡»am
& 
os
) const

379 
os
 << "U§ge: DBSUm" << 
’dl
;

380 
	}
}

383 
	gDBSumCmd
::
	$h–p
() const

385 
cout
 << 
	`£tw
(15è<< 
Ëá
 << "DBSUm: "

386 << "compu‹hsumm©iÚ oàthDB" << 
’dl
;

387 
	}
}

	@src/db/dbjson.cpp

9 
	~<iomª
>

10 
	~<io¡»am
>

11 
	~<f¡»am
>

12 
	~<c¡dlib
>

13 
	~<ÿs£¹
>

14 
	~<şim™s
>

15 
	~<cm©h
>

16 
	~<¡ršg
>

17 
	~<®gÜ™hm
>

18 
	~"dbJsÚ.h
"

19 
	~"ut.h
"

21 
usšg
 
Çme¥aû
 
	g¡d
;

26 
	go¡»am
&

27 
	gİ”©Ü
 << (
	go¡»am
& 
	gos
, cÚ¡ 
	gDBJsÚEËm
& 
	gj
)

29 
	gos
 << "\"" << 
	gj
.
	g_key
 << "\" : " << j.
	g_v®ue
;

30  
	gos
;

33 
	gi¡»am
& 
	gİ”©Ü
 >> (i¡»am& 
	gis
, 
	gDBJsÚ
& 
	gj
)

38 
as£¹
(
j
.
_obj
.
em±y
());

40 
	gj
.
	g»adš
 = 
Œue
;

42 
¡ršg
 
	gkey
;

43 
	gv®ue
;

44 
¡ršg
 
	gcŞÚ
;

46 
	gis
 >> 
	gkey
){

47 if(
	gkey
 =ğ"{" || 
key
 ==",") ;

48 if(
	gkey
 == "}") ;

49 
	gis
 >> 
	gcŞÚ
 >> 
	gv®ue
;

50 
	gkey
 = 
key
.
assign
(key, 1, key.
Ëngth
()-2);

52 if(
isV®idV¬Name
(
key
)){

53 
DBJsÚEËm
 
–em
(
key
, 
v®ue
);

54 
	gj
.
	g_obj
.
push_back
(
–em
);

57  
	gis
;

60 
	go¡»am
& 
	gİ”©Ü
 << (o¡»am& 
	gos
, cÚ¡ 
	gDBJsÚ
& 
	gj
)

63 
	gi
=0; i<()
	gj
.
size
(); i++)

64 
	gos
 << 
	gj
.
	g_obj
[
i
] << 
	g’dl
;

66 
	gos
 << "TÙ® JSONƒËm’ts: " << 
	gj
.
size
(è<< 
	g’dl
;

68  
	gos
;

78 
	gDBJsÚ
::
	$»£t
()

81 
_obj
.
	`ş—r
();

82 
	}
}

85 
boŞ


86 
	gDBJsÚ
::
	$add
(cÚ¡ 
DBJsÚEËm
& 
–m
)

89 
i
=0; i<()
_obj
.
	`size
(); i++)

90 if(
_obj
[
i
].
_key
 =ğ
–m
._keyè 
çl£
;

92 
_obj
.
	`push_back
(
–m
);

94  
Œue
;

95 
	}
}

99 
	gDBJsÚ
::
	$ave
() const

102 if(
this
->
	`em±y
()è 
NAN
;

104 
sum
;

106 
i
=0; i<()
_obj
.
	`size
(); i++)

107 
sum
 +ğ
_obj
[
i
].
_v®ue
;

109 
ave
 = 
sum
/
_obj
.
	`size
();

111  
ave
;

114 
	}
}

118 
	gDBJsÚ
::
	$max
(
size_t
& 
idx
) const

121 if(
this
->
	`em±y
()){

122 
idx
 = 
this
->
	`size
();

123 
maxN
 = 
INT_MIN
;

124  
maxN
;

127 
max
 = 
_obj
[0].
_v®ue
;

128 
i
=1; i<()
_obj
.
	`size
(); i++)

129 if(
_obj
[
i
].
_v®ue
 > 
max
) max = _obj[i]._value;

131  
max
;

133 
	}
}

137 
	gDBJsÚ
::
	$mš
(
size_t
& 
idx
) const

140 if(
this
->
	`em±y
()){

141 
idx
 = 
this
->
	`size
();

142 
mšN
 = 
INT_MAX
;

143  
mšN
;

146 
mš
 = 
_obj
[0].
_v®ue
;

147 
i
=1; i<()
_obj
.
	`size
(); i++)

148 if(
_obj
[
i
].
_v®ue
 < 
mš
) min = _obj[i]._value;

150  
mš
;

152 
	}
}

155 
	gDBJsÚ
::
	$sÜt
(cÚ¡ 
DBSÜtKey
& 
s
)

158 ::
	`sÜt
(
_obj
.
	`begš
(), _obj.
	`’d
(), 
s
);

159 
	}
}

162 
	gDBJsÚ
::
	$sÜt
(cÚ¡ 
DBSÜtV®ue
& 
s
)

165 ::
	`sÜt
(
_obj
.
	`begš
(), _obj.
	`’d
(), 
s
);

166 
	}
}

170 
	gDBJsÚ
::
	$sum
() const

173 if(
this
->
	`em±y
()){

174 
s
 = 0;

175  
s
;

178 
sum
;

179 
i
=0; i<()
_obj
.
	`size
(); i++)

180 
sum
 +ğ
_obj
[
i
].
_v®ue
;

182  
sum
;

184 
	}
}

	@src/db/dbjson.h

8 #iâdeà
DB_JSON_H


9 
	#DB_JSON_H


	)

11 
	~<veùÜ
>

12 
	~<¡ršg
>

13 
	~<unÜd”ed_£t
>

15 
usšg
 
Çme¥aû
 
	g¡d
;

17 
	gDBSÜtKey
;

18 
	gDBSÜtV®ue
;

20 şas 
	cDBJsÚEËm


22 
	mpublic
:

24 
	$DBJsÚEËm
() {}

25 
	$DBJsÚEËm
(cÚ¡ 
¡ršg
& 
k
, 
v
): 
	`_key
(k), 
	$_v®ue
(
v
è{
	}
}

27 cÚ¡ 
	g¡ršg
& 
	$key
(ècÚ¡ {  
_key
; 
	}
}

28 
	g¡ršg
& 
	$key
(è{  
_key
; 
	}
}

29 cÚ¡ & 
	$v®ue
(ècÚ¡ {  
_v®ue
; 
	}
}

30 & 
	$v®ue
(è{  
_v®ue
; 
	}
}

32 
ä›nd
 
	go¡»am
& 
	gİ”©Ü
 << (o¡»am&, cÚ¡ 
	gDBJsÚEËm
&);

33 
ä›nd
 
şass
 
	gDBJsÚ
;

35 
	g´iv©e
:

36 
¡ršg
 
_key
;

37 
	g_v®ue
;

40 şas 
	cDBJsÚ


42 
	mpublic
:

44 
	$DBJsÚ
():
	$»adš
(
çl£
) {}

45 
boŞ
 
	`add
(cÚ¡ 
DBJsÚEËm
&);

46 
	$ave
() const;

47 
	$max
(
size_t
&) const;

48 
	$mš
(
size_t
&) const;

49 
	`sÜt
(cÚ¡ 
DBSÜtKey
&);

50 
	`sÜt
(cÚ¡ 
DBSÜtV®ue
&);

51 
	$sum
() const;

54 
	`»£t
();

55 
size_t
 
	$size
(ècÚ¡ {  
_obj
.
	`size
(); 
	}
}

56 
boŞ
 
	$em±y
(ècÚ¡ {  
_obj
.
	`em±y
(); 
	}
}

57 
	gDBJsÚEËm
& 
	gİ”©Ü
 [] (
size_t
 
	gi
è{  
	g_obj
[
i
]; }

58 cÚ¡ 
	gDBJsÚEËm
& 
	gİ”©Ü
 [] (
size_t
 
	gi
ècÚ¡ {  
	g_obj
[
i
]; }

62 
boŞ
 
	gİ”©Ü
 !(è{  !
	g»adš
; }

64 
İ”©Ü
 * (ècÚ¡ {  (
	g»adš
 =ğ
Œue
è? (*)
this
 : 
NULL
; }

66 
boŞ
 
	g»adš
;

69 
ä›nd
 
	gi¡»am
& 
	gİ”©Ü
 >> (i¡»am& 
	gis
, 
	gDBJsÚ
& 
	gj
);

70 
ä›nd
 
	go¡»am
& 
	gİ”©Ü
 << (o¡»am& 
	gos
, cÚ¡ 
	gDBJsÚ
& 
	gj
);

72 
	g´iv©e
:

73 
veùÜ
<
DBJsÚEËm
> 
_obj
;

77 
	sDBSÜtKey


79 
boŞ
 
İ”©Ü
(è(cÚ¡ 
	mDBJsÚEËm
& 
	mm1
, cÚ¡ DBJsÚEËm& 
	mm2
) const {

80  (
	mm1
.
key
(è< 
	mm2
.key());

84 
	sDBSÜtV®ue


86 
boŞ
 
İ”©Ü
(è(cÚ¡ 
	mDBJsÚEËm
& 
	mm1
, cÚ¡ DBJsÚEËm& 
	mm2
) const {

87  (
	mm1
.
v®ue
(è< 
	mm2
.value());

	@src/main/main.cpp

8 
	~<c¡dlib
>

9 
	~"ut.h
"

10 
	~"cmdP¬£r.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

17 
CmdP¬£r
* 
	gcmdMgr
 = 
Ãw
 CmdParser("mydb> ");

19 
boŞ
 
š™CommÚCmd
();

20 
boŞ
 
š™DbCmd
();

23 
	$u§ge
()

25 
cout
 << "U§ge: modC®ø[ -F< doF> ]" << 
’dl
;

26 
	}
}

29 
	$myex™
()

31 
	`u§ge
();

32 
	`ex™
(-1);

33 
	}
}

36 
	$maš
(
¬gc
, ** 
¬gv
)

38 
if¡»am
 
dof
;

40 ià(
¬gc
 == 3) {

41 ià(
	`mySŒNCmp
("-Fe", 
¬gv
[1], 2) == 0) {

42 ià(!
cmdMgr
->
	`İ’Dofe
(
¬gv
[2])) {

43 
û¼
 << "E¼Ü: cªnÙ o³Àf\"" << 
¬gv
[2] << "\"!!\n";

44 
	`myex™
();

48 
û¼
 << "E¼Ü: unknowÀ¬gum’ˆ\"" << 
¬gv
[1] << "\"!!\n";

49 
	`myex™
();

52 ià(
¬gc
 != 1) {

53 
û¼
 << "E¼Ü: iÎeg®‚umb” oà¬gum’ˆ(" << 
¬gc
 << ")!!\n";

54 
	`myex™
();

57 ià(!
	`š™CommÚCmd
(è|| !
	`š™DbCmd
())

60 
CmdExecStus
 
¡©us
 = 
CMD_EXEC_DONE
;

61 
¡©us
 !ğ
CMD_EXEC_QUIT
) {

62 
¡©us
 = 
cmdMgr
->
	`execOÃCmd
();

63 
cout
 << 
’dl
;

67 
	}
}

	@src/test/test.cpp

8 
	~<io¡»am
>

9 
	~<f¡»am
>

10 
	~<c¡dlib
>

11 
	~"dbJsÚ.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

15 
DBJsÚ
 
dbjsÚ
;

17 
şass
 
	gCmdP¬£r
;

18 
CmdP¬£r
* 
	gcmdMgr
 = 0;

21 
	$maš
(
¬gc
, ** 
¬gv
)

23 ià(
¬gc
 != 2) {

24 
û¼
 << "E¼Ü: usšge¡db <jsÚfe>!!" << 
’dl
;

25 
	`ex™
(-1);

28 
if¡»am
 
	`šf
(
¬gv
[1]);

30 ià(!
šf
) {

31 
û¼
 << "E¼Ü: cªnÙ o³Àf\"" << 
¬gv
[1] << "\"!!\n";

32 
	`ex™
(-1);

35 ià(
dbjsÚ
) {

36 
cout
 << "TabË i »£‰šg..." << 
’dl
;

37 
dbjsÚ
.
	`»£t
();

39 ià(!(
šf
 >> 
dbjsÚ
)) {

40 
û¼
 << "E¼Ü iÀ»adšg JSON fe!!" << 
’dl
;

41 
	`ex™
(-1);

44 
cout
 << "========================" << 
’dl
;

45 
cout
 << " PršˆJSON objeù" << 
’dl
;

46 
cout
 << "========================" << 
’dl
;

47 
cout
 << 
dbjsÚ
 << 
’dl
;

52 
DBJsÚEËm
 
	`a
("I†ove TA", 666);

53 
dbjsÚ
.
	`add
(
a
);

54 
cout
 << 
dbjsÚ
 << 
’dl
;

55 
cout
 << 
dbjsÚ
.
	`ave
(è<< 
’dl
;

56 
cout
 << 
dbjsÚ
.
	`sum
(è<< 
’dl
;

57 
cout
 << 
dbjsÚ
.
	`size
(è<< 
’dl
;

60 
	}
}

	@src/util/myGetChar.cpp

8 
	~<io¡»am
>

9 
	~<‹rmios.h
>

10 
	~<¡dlib.h
>

11 
	~<ùy³.h
>

13 
usšg
 
Çme¥aû
 
	g¡d
;

18 
‹rmios
 
	g¡Üed_£‰šgs
;

20 
	$»£t_key´ess
()

22 
	`tc£‰r
(0,
TCSANOW
,&
¡Üed_£‰šgs
);

23 
	}
}

25 
	$£t_key´ess
()

27 
‹rmios
 
Ãw_£‰šgs
;

28 
	`tcg‘©Œ
(0,&
¡Üed_£‰šgs
);

29 
Ãw_£‰šgs
 = 
¡Üed_£‰šgs
;

30 
Ãw_£‰šgs
.
c_læag
 &ğ(~
ICANON
);

31 
Ãw_£‰šgs
.
c_læag
 &ğ(~
ECHO
);

32 
Ãw_£‰šgs
.
c_cc
[
VTIME
] = 0;

33 
	`tcg‘©Œ
(0,&
¡Üed_£‰šgs
);

34 
Ãw_£‰šgs
.
c_cc
[
VMIN
] = 1;

35 
	`tc£‰r
(0,
TCSANOW
,&
Ãw_£‰šgs
);

36 
	}
}

42 
	$myG‘Ch¬
(
i¡»am
& 
i¡r
)

44 
ch
;

45 
	`£t_key´ess
();

46 
i¡r
.
	`un£tf
(
ios_ba£
::
skws
);

47 
i¡r
 >> 
ch
;

48 
i¡r
.
	`£tf
(
ios_ba£
::
skws
);

49 
	`»£t_key´ess
();

50  
ch
;

51 
	}
}

53 
	$myG‘Ch¬
()

55  
	`myG‘Ch¬
(
cš
);

56 
	}
}

	@src/util/myString.cpp

8 
	~<¡ršg
>

9 
	~<ùy³.h
>

10 
	~<c¡ršg
>

11 
	~<ÿs£¹
>

13 
usšg
 
Çme¥aû
 
	g¡d
;

23 
	$mySŒNCmp
(cÚ¡ 
¡ršg
& 
s1
, cÚ¡ sŒšg& 
s2
, 
n
)

25 
	`as£¹
(
n
 > 0);

26 
n2
 = 
s2
.
	`size
();

27 ià(
n2
 == 0)  -1;

28 
n1
 = 
s1
.
	`size
();

29 
	`as£¹
(
n1
 >ğ
n
);

30 
i
 = 0; i < 
n1
; ++i) {

31 ià(
i
 =ğ
n2
)

32  (
i
 < 
n
)? 1 : 0;

33 
ch1
 = (
	`isuµ”
(
s1
[
i
]))? 
	`tŞow”
(s1[i]) : s1[i];

34 
ch2
 = (
	`isuµ”
(
s2
[
i
]))? 
	`tŞow”
(s2[i]) : s2[i];

35 ià(
ch1
 !ğ
ch2
)

36  (
ch1
 - 
ch2
);

38  (
n1
 - 
n2
);

39 
	}
}

47 
size_t


48 
mySŒG‘Tok
(cÚ¡ 
¡ršg
& 
¡r
, sŒšg& 
tok
, 
size_t
 
pos
 = 0,

49 cÚ¡ 
d–
 = ' ')

51 
size_t
 
begš
 = 
¡r
.
fšd_fœ¡_nÙ_of
(
d–
, 
pos
);

52 ià(
	gbegš
 =ğ
¡ršg
::
Åos
è{ 
tok
 = "";  begin; }

53 
size_t
 
	g’d
 = 
¡r
.
fšd_fœ¡_of
(
d–
, 
begš
);

54 
	gtok
 = 
¡r
.
sub¡r
(
begš
, 
’d
 - begin);

55  
	g’d
;

61 
boŞ


62 
	$mySŒ2IÁ
(cÚ¡ 
¡ršg
& 
¡r
, & 
num
)

64 
num
 = 0;

65 
size_t
 
i
 = 0;

66 
sign
 = 1;

67 ià(
¡r
[0] =ğ'-'è{ 
sign
 = -1; 
i
 = 1; }

68 
boŞ
 
v®id
 = 
çl£
;

69 ; 
i
 < 
¡r
.
	`size
(); ++i) {

70 ià(
	`isdig™
(
¡r
[
i
])) {

71 
num
 *= 10;

72 
num
 +ğ(
¡r
[
i
] - '0');

73 
v®id
 = 
Œue
;

75  
çl£
;

77 
num
 *ğ
sign
;

78  
v®id
;

79 
	}
}

85 
boŞ


86 
	$isV®idV¬Name
(cÚ¡ 
¡ršg
& 
¡r
)

88 
size_t
 
n
 = 
¡r
.
	`size
();

89 ià(
n
 =ğ0è 
çl£
;

90 ià(!
	`i§Íha
(
¡r
[0]) && str[0] != '_')

91  
çl£
;

92 
size_t
 
i
 = 1; i < 
n
; ++i)

93 ià(!
	`i§Êum
(
¡r
[
i
]) && str[i] != '_')

94  
çl£
;

95  
Œue
;

96 
	}
}

	@src/util/util.cpp

8 
	~<sys/ty³s.h
>

9 
	~<dœ’t.h
>

10 
	~<”ºo.h
>

11 
	~<veùÜ
>

12 
	~<¡ršg
>

13 
	~<c¡ršg
>

14 
	~<io¡»am
>

15 
	~<iomª
>

16 
	~<®gÜ™hm
>

18 
usšg
 
Çme¥aû
 
	g¡d
;

23 
	gli¡Dœ


24 (
	gveùÜ
<
	g¡ršg
>& 
	gfes
, cÚ¡ sŒšg& 
	g´efix
, cÚ¡ sŒšg& 
	gdœ
 = ".")

26 
DIR
 *
dp
;

27 
dœ’t
 *
	gdœp
;

28 ià((
	gdp
 = 
İ’dœ
(
dœ
.
c_¡r
())è=ğ
NULL
) {

29 
û¼
 << "E¼Ü(" << 
”ºo
 << "): faedØİ’ " << 
dœ
 << "!!\n";

30  
	g”ºo
;

33 cÚ¡ *
	gµ
 = 
´efix
.
size
()?…»fix.
c_¡r
(): 0;

34 (
	gdœp
 = 
»addœ
(
dp
)è!ğ
NULL
) {

35 ià(
¡ršg
(
dœp
->
d_Çme
) == "." ||

36 
¡ršg
(
dœp
->
d_Çme
) == "..") ;

37 ià(!
	gµ
 || 
¡ºcmp
(
dœp
->
d_Çme
, 
µ
, 
´efix
.
size
()) == 0)

38 
fes
.
push_back
(
¡ršg
(
dœp
->
d_Çme
));

40 
sÜt
(
fes
.
begš
(), fes.
’d
());

41 
şo£dœ
(
dp
);

	@src/util/util.h

8 #iâdeà
UTIL_H


9 
	#UTIL_H


	)

11 
	~<i¡»am
>

12 
	~<veùÜ
>

14 
usšg
 
Çme¥aû
 
	g¡d
;

17 
mySŒNCmp
(cÚ¡ 
¡ršg
& 
s1
, cÚ¡ sŒšg& 
s2
, 
n
);

18 
size_t
 
mySŒG‘Tok
(cÚ¡ 
¡ršg
& 
¡r
, sŒšg& 
tok
, size_ˆ
pos
 = 0,

19 cÚ¡ 
d–
 = ' ');

20 
boŞ
 
mySŒ2IÁ
(cÚ¡ 
¡ršg
& 
¡r
, & 
num
);

21 
boŞ
 
isV®idV¬Name
(cÚ¡ 
¡ršg
& 
¡r
);

24 
myG‘Ch¬
(
i¡»am
&);

25 
myG‘Ch¬
();

28 
li¡Dœ
(
veùÜ
<
¡ršg
>&, const string&, const string&);

	@
1
.
0
16
309
src/cmd/cmdCharDef.cpp
src/cmd/cmdCharDef.h
src/cmd/cmdCommon.cpp
src/cmd/cmdCommon.h
src/cmd/cmdParser.cpp
src/cmd/cmdParser.h
src/db/dbCmd.h
src/db/dbcmd.cpp
src/db/dbjson.cpp
src/db/dbjson.h
src/main/main.cpp
src/test/test.cpp
src/util/myGetChar.cpp
src/util/myString.cpp
src/util/util.cpp
src/util/util.h
